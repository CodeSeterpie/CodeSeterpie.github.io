---
title: "活動記録 2020/06/27 - HousePriceで目標としていたスコア0.12を達成(0.11992)"
last_modified_at: 2020-06-28T12:00:00+09:00
categories:
  - Blog
tags:
  - Kaggle
---

前回の活動でスコアを0.123台まで改善することができ、HousePriceで目標としている0.12まで後わずかとなった。今回はモデルのパラメータなどを微調整したり、Null値の扱いを変えたり、アンサンブルの方法を変えたりして、Kaggleへ結果を何度も提出し、トライ＆エラーを繰り返すことでスコアの改善を試みた。

結果としては、目標のスコア0.12を超える0.11992を得ることができ、目標を達成した。

具体的な修正内容は[今回の活動成果のプルリクエスト](https://github.com/CodeSeterpie/CodeSeterpie/pull/68/files#diff-950ad864b29d2230c1edf5f100b9dbd0)を参照。




|パラメータ|変更前の値|変更後の値|
|:---|:---|:---|
|boosting_type|gbdt|未設定|
|objective|regression_l2|regression|
|metric|l2|未設定|
|num_leaves|40|4|
|learning_rate|0.05|0.01|
|n_estimators|未設定|5000|
|max_bin|未設定|200|
|feature_fraction|0.9|0.2|
|feature_fraction_seed|未設定|7|
|bagging_fraction|0.8|0.75|
|bagging_freq|5|5|
|bagging_seed|未設定|7|
|lambda_l2|2|未設定|
|verbose|未設定|-1|

いろいろ試した結果、下の状態である時に最高のスコア(0.12255)を記録した。修正したプログラムの差分は[こちら](https://github.com/CodeSeterpie/CodeSeterpie/pull/67/files?file-filters%5B%5D=.py#diff-950ad864b29d2230c1edf5f100b9dbd0)を参照。

* 成績上位者の特徴量を追加
* 成績上位者のパラメータに変更
* 数値変数を全パターン組み合わせて、割り算して追加した特徴量を除外
* XGBoostモデルを追加し、出力した結果の平均から最終スコアを算出

#### 提出した結果

<img src="/assets/images/posts/report_20200613/HousePriceScore_20200613.jpg" width="800">

また、参加者の方から下のアドバイスをもらったので、次回以降試してみる
* 特徴量が多すぎると過学習が起きてスコアが下がってしまう。
* 決定木のモデルより、ランダムフォレストのモデルの方が性能が良い。

### 参考にした成績上位者のプログラム [A Detailed Regression Guide with House-pricing](https://www.kaggle.com/masumrumi/a-detailed-regression-guide-with-house-pricing)の抜粋





---

### メモ
* 他に参考になりそうなNotebook  
  [#1 House Prices Solution [top 1%]](https://www.kaggle.com/jesucristo/1-house-prices-solution-top-1)

