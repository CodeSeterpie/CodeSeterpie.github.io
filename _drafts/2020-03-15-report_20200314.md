---
title: "活動記録 2020/03/14"
last_modified_at: 2020-03-14T12:00:00+09:00
categories:
  - Blog
tags:
  - Kaggle
---

## Kaggleへの挑戦
実際にプログラムを作成して[
House Prices: Advanced Regression Techniques](https://www.kaggle.com/c/house-prices-advanced-regression-techniques/overview)に予測したデータを提出し、スコアを取得した。  

### データ項目の説明の日本語訳を作成
学習データ、テストデータの項目についての説明が記載されている[data_description.txt](https://github.com/CodeSeterpie/CodeSeterpie/blob/develop/Kaggle/HousePrices/input/data_description.txt)の内容ついて、日本語訳をつけたマークダウンファイルを作成した。

* 作成した日本語訳マークダウンファイル
[/Kaggle/HousePrices/input/data_description_ja.md](https://github.com/CodeSeterpie/CodeSeterpie/blob/develop/Kaggle/HousePrices/input/data_description_ja.md)

アメリカの住宅に関するデータのためか、ポーチの種類別に広さのデータがあったり、地下室のデータが細かくあったり日本の住居とは違う観点でデータを取得している感じがした。また、BsmtExposure(地下室の露出の程度を表す項目?)等については、住宅の専門用語のようで一致する日本語訳がないものもあった。

各項目への設定値の説明は必要なときに日本語訳を追加できるよう枠のみ作成した。

### カテゴリ変数に対してOne Hot Encodingを実施
[LightGBMのPlottingメソッドのドキュメント](https://lightgbm.readthedocs.io/en/latest/Python-API.html#plotting)を読んだところ、create_tree_digraphメソッドを使用すると分析に使用した決定木を可視化できるとの記載があったため、試してみた。  
create_tree_digraphメソッドを動かすためには、追加のライブラリとしてgraphvizが必要だったため、Dockerfileを修正しgraphvizをインストールした。
* [Dockerfileの修正内容](https://github.com/CodeSeterpie/CodeSeterpie/commit/d4f7e9738de2e265de9e8d1f77068765c63a9121#diff-70c658252bb41ca6c616247f6af9d442)

graphvizのインストール後、create_tree_digraphメソッドを使って作成した決定木のイメージは下の通り。

<img src="/assets/images/posts/report_20200229/決定木イメージ.svg">

### Id列を除いて分析を実行
どの特徴量が重要なのか上で可視化した結果、分析にIdが含まれており特徴量として最重要とされていることがわかった。IdはHousePriceに関係ないことは明白であるため、Idを除いて分析を行った結果、これまでで最高のスコア(0.13524)となった。  

#### 提出した結果

<img src="/assets/images/posts/report_20200229/HousePriceScore_20200229.jpg" width="800">

#### ソースへのリンク
* 分析に使用したnotebook  
[/Kaggle/HousePrices/notebook/main/20200229/mainnote.ipynb](https://github.com/CodeSeterpie/CodeSeterpie/blob/develop/Kaggle/HousePrices/notebook/main/20200229/mainnote.ipynb)
* 提出したファイル  
[/Kaggle/HousePrices/output/main/20200229/submission.csv](https://github.com/CodeSeterpie/CodeSeterpie/blob/develop/Kaggle/HousePrices/output/main/20200229/submission.csv)

## 課題
* 【継続】[新しい特徴量を作成して増やす必要がある](https://github.com/CodeSeterpie/CodeSeterpie/issues/39)
* 【クローズ】[~~各特徴量の説明の日本語訳を作成する必要がある~~](https://github.com/CodeSeterpie/CodeSeterpie/issues/40)
